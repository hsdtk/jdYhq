/*
商品库存监控
环境变量：
设置了抢券激活码的就可以不需要这个激活码了
TK_SIGN 激活码 请关注公众号cxt_wg回复“监控激活码”获取激活码
STOCK_GOODS 监控商品Id多个用&符号分隔 不需监控了该值改为0
STOCK_AREA 监控地区ID不设置默认江苏南京 示例12_904_3375或12-904-3375

===================quantumultx================
[task_local]
#商品库存监控
0-59/5 0,7-23 * * * https://gitee.com/cxtwg2/jdYhq/blob/main/jd_stock_con.js, tag=商品库存监控, img-url=https://raw.githubusercontent.com/jd.png, enabled=true
=====================Loon================
[Script]
cron "0-59/5 0,7-23 * * *" script-path=https://gitee.com/cxtwg2/jdYhq/blob/main/jd_stock_con.js, tag=商品库存监控
*/
const $ = new Env('商品库存监控');

var _0xod5='jsjiami.com.v6',_0xod5_=['‮_0xod5'],_0x1df8=[_0xod5,'wpXDhcOMGWs=','w4TCisKSwpci','wp/Dm8KQ','w5/CpcOPYEk=','wrrDpsKnwowe','wpjCgGISw4k=','wqbCqcK+OMOma1TDjcOg','w79twpnCqMOa','ScKKwqtqbQ==','w5bCncOrbnE=','OMKtYcOjYg==','AsOnwonCqMOAw5ZIwqbCkg==','wrzCt8KGw4bDrcKlw7hhPw==','w6XCtsKgwqLCi8O6R8OVwqo=','w5/CnsKQwrML','wpFewqBOwr4=','C1DCh8OiBEfDhg==','wrhkwqLDn0ArUQ==','w6XDpg3CpSc=','NnHDnsOpwrc=','RMO7w5rDq8O2wpovw4vDqw==','E1bCpsOaw7Nuw7bCjMKmfcKtbMK4DMOzw6Mn','w6zCr8K1wpfCqg==','eXdswq4w','E8OXw6jCsk8=','w5DCn8KnwqUW','UcOGw53Cg0vCtw==','w6VvZg==','EsKmZMO5cgd3','BMK+wpRSSA8mwrHCsFs=','woViwptMZcKtRwTChMKISBBUw7XCkng2JQMmwqNZcsK/wpjDjwnDmg==','wqbCqmMcw48=','w5nCscK8wrUF','ccOPw5JOSg==','w73DrnVEWQ==','wpxawoV7wpfCsiDDkQ==','dMKPeULCvA==','EsKmZMOgdARmcQ==','wpTDkcKDwoAEQXUq','w5bDg2tHf8OVEw==','dmFLwqQAY8Ka','w5Qqw7t+w5Y=','w5rCjsKFwrYFwprDuA==','w5nCgXbDhXnCkMOwEg==','EMOCw5vCrkXDv8OmUQ==','w5bDg2tOd8OPA1Ycw6o=','w7AIw4Nnw5w=','w73CiHPDnxxOwpfCmMOpQA==','acKLVGjCscOBDsKhwp/DmQ==','EMOCw5vCtU/DqcO7TEBu','wqXClVoWw4fCuStWBEbDvhs5wr/DmA==','5pyj5Y+D54+Lw67DtVbDgcOtwqzDoQ1rw7RUX8Ky5pSR5LiE5LuE5L6W6Lya6KOG6YKX55y4776e','6K2Y5YaC5rGt5YW15Ly85Y+qQ8K0Ow4QDOWbgeWlkuKAlOebr+aNnea8jOa1seejmeKApeiNnOWNtOa+gOa1u+eise+/jQ==','IDZgw5lRI8KgwqtWD8K9','6K+m5Y6q55u45o2p5Z6P5Y2454+Q5aK85Y676YeJ5ouT5Yud77yr','w6kSw7FKw5k=','5p+/6YaR576y6Z2L6KST55uI5o6a55in5ZeB5ZOO776l','H8Ofw7/CrHo=','w5TDiGk=','RDR4wpHDrg4gbCpBwo0=','w7gww6U=','wobCmsK9IsOn','w7Amw7TDtj0=','wr0Jw7TDmsOk','w6Nnw5rDhHo=','DFfCi8Olw4E=','w6gYwrw=','woXCs1gJw5s=','wqRnKg==','w4Bkc8Khwp0=','w7Usw50=','d21wwoYI','UcO0w5ljeA==','wqrCrMKS','w4oXw7XDszl6w7o5woPCm0w=','wqPCp8KKw5LDrcK/','Xj4u','IsOGwqTCmMO/w7tmwofCusObLw==','FMO8wp0=','wqQowrZNTRbDh8OkF8K3w5M=','w5rDpSjCtRY=','TsOxwpDDpMOqw7sq','BcOCw5/CikvDqcOx','HWtdwqTCrlLDlA==','A0HCkMO7Gg==','Fh7ChMObwrI=','HsOIwq7CmMOd','w7RYwrDCm8Ok','w60IIA==','wqUkw5rDrsO5OwQOwqbDpg==','BcKlQMOocw==','wpISwo8=','w67Cv8K+wrEvwrHDnMKUwqfCuA==','w5fCimbDqG7CqsOk','w54uGg==','wpzClsKrw7bDksKIw5BdHcK2','DT7Cl8Ojwr0=','woxVwpnDiGIZdcOewpE1','ecO6w7g=','wo09wpx2Tg==','S8Ocwrs=','e3cLw7HDsVvDgA==','wpofw7I=','w70lw5bDpQs=','AWPCt8OSw4g=','WkY0w57Dm2fDpMOxwobDlA==','w63CjG7DuA==','wrFfLsO7w5U=','w5ZDwo7CrBPDvg==','w5BMw5vDmFA=','wr7DiMO+GUM=','w7oIBEzChg==','e8O0w7Js','F2RNwqLCvg==','wrdE5aW96LSew5fCquWNh+WalcO7wpQ=','exVHwq/Dky4G','w5JQwqfCjA==','K8OcYw==','GUjCmcO8w6U=','woXCh0o3w7o=','OcKsXMO/XA==','5pyc6Lay5LiZ77yTQ8KUdSXDny3CmcOEEwTDusOpPMOsw7ogw7UOwrvDrQ==','Ql3Ch8ObAQ==','w4Hph7jot5zkuJs=','Ouafsuecngc=','AsKoXcOkfw==','wo5+KsKVw5w=','FMKJwr55RA==','w6FwUcKYwrw=','OH1pwqvCvQ==','EsKfwoJhQQ==','w5jCvMOBUVI=','w688I8KFdA==','w7jCjVvDhGc=','DG/ClsOiw7k=','woU9w4zDrMOT','C2vCtcOtw4c=','5r2a5reW56CG6ZaV6K6W5oi75bSK6Lyx5p6SHw==','w68oAMKIbQ==','wqJTwppjQQ==','w7B+wrjCqsOi','ScO8wptoKg==','wpHDj8OSTA4=','w7spw7HDphc=','bMK3wpw=','6K6M5rGg5aej6LaP776M6K6j5qCZ5p2G576U6Le26YWO6K+T','ZcK2wo0=','w6nCoMKuwqEtwqnDkw==','w6dNw6vDtUE=','QMORwqLDmcOD','w4oBwq5GKg==','YWVNwpME','AmpPwoTChw==','YcKWwrBgcA==','DxHCh8Ouwos=','Wncsw7XDmQ==','wrUYw5zDnMOY','J3FWwqLCvU7DhsOmKsKx','woJ7GsOTw6A=','w6Q4wolNNA==','FsKrccOfWAV2fMKAw7Y=','w5dJwpXCmwjDssOpw7k=','wo7mnIfoto4=','SEo1w5nDnQ==','UFxxwqQs','w7/ChcKFwp3CnA==','w7Aow7HDhBU=','AFrClA==','K+S4j+aeieS5pg==','w7nDtxfCkxUOwpIkwrvCsw==','w7zCmcK3wrsW','WxtQwonDvQ==','w5cvCw==','LFfDssOxwo8=','w7BWbMKkwrI=','XcKaT1jCv8OxFcKuwo/Djw==','VMOawrrDt8OT','woh9wow=','V8KNwoh/Ug==','CjLClsO4wq4=','DhPCisOPwo8cwr9VFVw=','w5jDpgjCnB8+woM=','BVbCl8O+Gw==','woh9woxlfsK8','wr4Jw6zDsMKY','w4Fywo3CocOW','w7sAIsK1dQ==','w70Sw6rDhcKVaA==','w5XCn8KFwoIXw5TCssOpwoHCncO4Di/DlwDDg8K+','FsOXw5/CikPDqcO1Vk1yYWZcw5/CjsKrd8KzwrXDiMO0w5/DocKUwrVUw6km','JRTCo8OVwoA=','A3DDk8OZwqY=','wq9qwqZibQ==','w5UOw7J6w4M=','w47ChsKpwpfClw==','w4XCv8O4DEo=','XcOCwqFZDw==','w5dmw4jDhnfCuE7Cj8K8bQ==','6K+75YyO55iq5o6M5ZWe5ZKq542t5aCi5Y+G6YeU5oiW5Yq8776U','wrxxw7k=','CnDChMOAw5M=','w5cawoTCqkjCosOqw7TCrcKlwqwUYMKNWlXDhhp9PcK9wopResKCw5DDr3PDjQDDkGDDiFnDuG0=','w4IkAh/Dig==','wqE2woBndA==','wqbCrMKwIsOm','w6QWD8K1aQ==','wp4Gw4HDosOH','wp3Du8KdwpkS','DDHCiMO6wqw=','w7nCs0bDhXo=','w6bCpMKxwqHClw==','KHbCncOpw4sLwp7DrMKKXcOQ','JsKXX8OuUDVVVsKOw4Zc','wr3CqsKIBMOn','EkzCtsOPw7gbwr8=','A8KowoFMdg0k','GcK7wqVvYg==','wo/DisOkfhTClUg=','dcOswrrDmcO4','wo9EBMKQw6A=','w7gVMcKUSQ==','w4DCv8OQAnQ=','wovDoMKbwqMD','w7zCn2jDoTpFwpnChMOOXMOKw7A=','5p6x5Y6154+8SMKTw6TCvDvCrsOANmBuOTTDsuaUu+S6vuS4juS8hui+uuigq+mDiueelO+8nA==','wpVkIcO/w7s=','wqTDsMO4w6TDhsKyG8KC','WWJvwoYm','E1LCgMO6w6s=','OXPCo8OOw7o=','w5QMw4NMw6Q=','wrfmnZznnK8G','w6BKSsK2wrPDvMOLLsKzw6s=','w5rDkkluVQ==','w4LDk31wasOTH0we','w7kvC1jCrw==','wpjDn8O+OnE=','w6nCmGXDvw1fwpHCmMOq','woDDnsOKJE4swpQ1TQ==','w4s7w4vDuQQ=','jGBsRjilNLgCxamiBFE.OcdNXom.v6=='];if(function(_0x54c3a1,_0x2cbaa9,_0x38c8c){function _0x5b2163(_0x183b4d,_0x401240,_0x18ee7f,_0x2ad123,_0x54faa0,_0x49e28f){_0x401240=_0x401240>>0x8,_0x54faa0='po';var _0xdf85b='shift',_0x1e6d0f='push',_0x49e28f='‮';if(_0x401240<_0x183b4d){while(--_0x183b4d){_0x2ad123=_0x54c3a1[_0xdf85b]();if(_0x401240===_0x183b4d&&_0x49e28f==='‮'&&_0x49e28f['length']===0x1){_0x401240=_0x2ad123,_0x18ee7f=_0x54c3a1[_0x54faa0+'p']();}else if(_0x401240&&_0x18ee7f['replace'](/[GBRlNLgCxBFEOdNX=]/g,'')===_0x401240){_0x54c3a1[_0x1e6d0f](_0x2ad123);}}_0x54c3a1[_0x1e6d0f](_0x54c3a1[_0xdf85b]());}return 0x11a1dc;};return _0x5b2163(++_0x2cbaa9,_0x38c8c)>>_0x2cbaa9^_0x38c8c;}(_0x1df8,0x123,0x12300),_0x1df8){_0xod5_=_0x1df8['length']^0x123;};function _0x1997(_0x2c62f8,_0x5eb744){_0x2c62f8=~~'0x'['concat'](_0x2c62f8['slice'](0x1));var _0x2cf79d=_0x1df8[_0x2c62f8];if(_0x1997['vomUQh']===undefined){(function(){var _0x1e17a4=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x15bf0b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x1e17a4['atob']||(_0x1e17a4['atob']=function(_0x24d158){var _0x570918=String(_0x24d158)['replace'](/=+$/,'');for(var _0x32a8aa=0x0,_0x5f23bf,_0x4753bd,_0x42feff=0x0,_0x263017='';_0x4753bd=_0x570918['charAt'](_0x42feff++);~_0x4753bd&&(_0x5f23bf=_0x32a8aa%0x4?_0x5f23bf*0x40+_0x4753bd:_0x4753bd,_0x32a8aa++%0x4)?_0x263017+=String['fromCharCode'](0xff&_0x5f23bf>>(-0x2*_0x32a8aa&0x6)):0x0){_0x4753bd=_0x15bf0b['indexOf'](_0x4753bd);}return _0x263017;});}());function _0x173adf(_0x5e3f29,_0x5eb744){var _0x1d7f0a=[],_0x37f025=0x0,_0x488002,_0x2b3119='',_0x300f6f='';_0x5e3f29=atob(_0x5e3f29);for(var _0x6a01cb=0x0,_0x1a1e5a=_0x5e3f29['length'];_0x6a01cb<_0x1a1e5a;_0x6a01cb++){_0x300f6f+='%'+('00'+_0x5e3f29['charCodeAt'](_0x6a01cb)['toString'](0x10))['slice'](-0x2);}_0x5e3f29=decodeURIComponent(_0x300f6f);for(var _0x5f1597=0x0;_0x5f1597<0x100;_0x5f1597++){_0x1d7f0a[_0x5f1597]=_0x5f1597;}for(_0x5f1597=0x0;_0x5f1597<0x100;_0x5f1597++){_0x37f025=(_0x37f025+_0x1d7f0a[_0x5f1597]+_0x5eb744['charCodeAt'](_0x5f1597%_0x5eb744['length']))%0x100;_0x488002=_0x1d7f0a[_0x5f1597];_0x1d7f0a[_0x5f1597]=_0x1d7f0a[_0x37f025];_0x1d7f0a[_0x37f025]=_0x488002;}_0x5f1597=0x0;_0x37f025=0x0;for(var _0x41a65f=0x0;_0x41a65f<_0x5e3f29['length'];_0x41a65f++){_0x5f1597=(_0x5f1597+0x1)%0x100;_0x37f025=(_0x37f025+_0x1d7f0a[_0x5f1597])%0x100;_0x488002=_0x1d7f0a[_0x5f1597];_0x1d7f0a[_0x5f1597]=_0x1d7f0a[_0x37f025];_0x1d7f0a[_0x37f025]=_0x488002;_0x2b3119+=String['fromCharCode'](_0x5e3f29['charCodeAt'](_0x41a65f)^_0x1d7f0a[(_0x1d7f0a[_0x5f1597]+_0x1d7f0a[_0x37f025])%0x100]);}return _0x2b3119;}_0x1997['oQaisU']=_0x173adf;_0x1997['GXwcHM']={};_0x1997['vomUQh']=!![];}var _0x2e3fb2=_0x1997['GXwcHM'][_0x2c62f8];if(_0x2e3fb2===undefined){if(_0x1997['xBsXua']===undefined){_0x1997['xBsXua']=!![];}_0x2cf79d=_0x1997['oQaisU'](_0x2cf79d,_0x5eb744);_0x1997['GXwcHM'][_0x2c62f8]=_0x2cf79d;}else{_0x2cf79d=_0x2e3fb2;}return _0x2cf79d;};let notify='';let jdNotify=!![];try{notify=$['isNode']()?require('./sendNotify'):'';}catch(_0x1a1b47){jdNotify=![];console['log'](_0x1997('‫0','MU&$'));}let jhmMsg=_0x1997('‫1','y89e');let goodId='';let areaId=_0x1997('‫2','A]mN');let tips='';let xtTkSign='';!(async()=>{var _0x271e8c={'sZVtE':function(_0x24b001,_0x6db4e0){return _0x24b001+_0x6db4e0;},'fiOfi':'未检测到激活码,','zAexH':_0x1997('‫3','X&J8'),'SFaiu':function(_0x5707b5,_0x49df6a){return _0x5707b5==_0x49df6a;},'ieNFO':function(_0x3d4b02,_0x47bf03,_0x286039){return _0x3d4b02(_0x47bf03,_0x286039);},'KyawV':function(_0x141859,_0x89007c){return _0x141859!==_0x89007c;},'WispN':_0x1997('‫4','ywUm'),'GCvRu':function(_0x5d3c77,_0x513b9b,_0x1f5e14){return _0x5d3c77(_0x513b9b,_0x1f5e14);},'VkGbO':'激活码错误或已过期,','ONRDS':function(_0x49da5e,_0x1e096d){return _0x49da5e+_0x1e096d;},'DaFjS':function(_0x157808,_0x35c713){return _0x157808>_0x35c713;},'ZNJbK':function(_0x2ae63a,_0x5c499a){return _0x2ae63a+_0x5c499a;},'pfPEh':function(_0x7ac1f1,_0x4f226f){return _0x7ac1f1>_0x4f226f;},'otcMw':'%2C','BgyrK':_0x1997('‫5','MHX@'),'PYrOY':'gGkEP','dflUy':function(_0x3b2855,_0x539d53){return _0x3b2855+_0x539d53;},'clQKK':function(_0x5bb07a,_0x3120b4){return _0x5bb07a*_0x3120b4;},'dBrld':function(_0x2cfca1){return _0x2cfca1();},'McVNy':function(_0x5d8d6d,_0x447237){return _0x5d8d6d!==_0x447237;},'alHwp':_0x1997('‫6','eHz3')};if(process[_0x1997('‮7','x!zX')][_0x1997('‫8','X&J8')]){xtTkSign=process[_0x1997('‫9','ywUm')]['YHQ_QL_SIGN'];}if(_0x271e8c[_0x1997('‮a','MHX@')](xtTkSign,'')||!_0x271e8c[_0x1997('‮b','@4Mc')](getQmExpireDate,xtTkSign,0x2)){if(_0x271e8c[_0x1997('‮c','yr3j')](_0x271e8c[_0x1997('‮d','&9UE')],_0x1997('‫e','ei%W'))){if(process[_0x1997('‫f','db0c')]['TK_SIGN']){if(!_0x271e8c[_0x1997('‫10','M7Jg')](getQmExpireDate,process[_0x1997('‮11','13db')]['TK_SIGN'],0x1)){console['log'](_0x271e8c[_0x1997('‮12','!y^w')](_0x271e8c['VkGbO'],jhmMsg));return;}}else{console[_0x1997('‮13','@4Mc')](_0x271e8c['ONRDS'](_0x271e8c[_0x1997('‫14','A]mN')],jhmMsg));return;}}else{return!![];}}if(process['env']['STOCK_GOODS']&&_0x271e8c[_0x1997('‫15','ZTXC')](process[_0x1997('‫16','3Gv6')][_0x1997('‮17','@4Mc')][_0x1997('‮18','3Gv6')],0x5)){console[_0x1997('‮19','IpDJ')](_0x271e8c['ZNJbK']('读取监控商品环境变量成功：',process['env'][_0x1997('‮1a','oOpu')]));goodId=process[_0x1997('‫1b','oOpu')][_0x1997('‫1c',')hPJ')];if(_0x271e8c[_0x1997('‮1d','uLnn')](goodId[_0x1997('‫1e','644B')]('&'),-0x1)){goodId=goodId[_0x1997('‮1f','eHz3')](/&/g,'%2C');}else if(goodId[_0x1997('‮20','MDZJ')](',')>-0x1){goodId=goodId['replace'](/,/g,_0x271e8c[_0x1997('‮21','V*K^')]);}}else{if(_0x271e8c[_0x1997('‮22','*F*Y')]('lCLrc',_0x1997('‮23','oOpu'))){console['log'](_0x271e8c[_0x1997('‫24','s4yz')]);return;}else{console['log'](_0x271e8c['sZVtE'](_0x271e8c['fiOfi'],jhmMsg));return;}}if(process[_0x1997('‫25','&a&L')][_0x1997('‮26','yr3j')]&&(_0x271e8c[_0x1997('‫27','U*8x')](process[_0x1997('‫28',')hPJ')][_0x1997('‮29','gKYG')][_0x1997('‮2a','Js&h')]('_'),-0x1)||process[_0x1997('‫2b','nqT(')][_0x1997('‮2c','3Gv6')]['indexOf']('-'))){if('gGkEP'!==_0x271e8c[_0x1997('‫2d','*F*Y')]){areaId=process[_0x1997('‫28',')hPJ')][_0x1997('‫2e','m)4d')]['replace'](/\-/g,'_');console[_0x1997('‮2f','ZTXC')](_0x271e8c[_0x1997('‫30',')hPJ')]+process[_0x1997('‫31','Q$#8')][_0x1997('‮26','yr3j')]);}else{areaId=process['env'][_0x1997('‫2e','m)4d')][_0x1997('‫32','MU&$')](/\-/g,'_');console[_0x1997('‫33','yr3j')](_0x271e8c[_0x1997('‮34','@4Mc')](_0x271e8c[_0x1997('‮35','ei%W')],process[_0x1997('‮11','13db')][_0x1997('‫36','MU&$')]));}}await $[_0x1997('‮37','Te@X')](_0x271e8c['clQKK'](Math[_0x1997('‮38','2hRJ')](_0x271e8c['clQKK'](Math[_0x1997('‮39','ulno')](),0xa)),0x3e8));await _0x271e8c[_0x1997('‫3a','&9UE')](doStockControl);if(jdNotify&&tips){if(_0x271e8c[_0x1997('‮3b','cIzm')](_0x271e8c[_0x1997('‫3c',']unw')],'hxPJP')){return null;}else{await notify['sendNotify']($[_0x1997('‮3d','ZTXC')],tips);}}})()[_0x1997('‮3e','MDZJ')](_0xf11566=>{$['log']('','❌\x20'+$['name']+_0x1997('‫3f',']unw')+_0xf11566+'!','');})[_0x1997('‮40','X&J8')](()=>{$[_0x1997('‮41','s4yz')]();});function doStockControl(){var _0x46b0d7={'eztPl':function(_0x280b03,_0x51149c){return _0x280b03+_0x51149c;},'wMDHy':function(_0x363c1d,_0x5972f4){return _0x363c1d+_0x5972f4;},'sfteI':':无货','NccWr':_0x1997('‫42','gg7j'),'OwvKd':_0x1997('‫43','ei%W'),'ytOqG':_0x1997('‮44','M7Jg'),'eDOYS':_0x1997('‮45','U*8x'),'cRsAV':'ZWdwv','gZuUH':_0x1997('‫46','ZTXC'),'FiYIq':_0x1997('‮47','V*K^'),'iLJMD':_0x1997('‫48','mTd1'),'aMXTk':_0x1997('‮49','9b$8'),'sMYAa':function(_0x241445,_0x3d8459){return _0x241445===_0x3d8459;},'pIgGG':_0x1997('‮4a','U*8x'),'vTFjC':function(_0x4c4a2a){return _0x4c4a2a();}};return new Promise(_0x4588fb=>{var _0x1b1a07={'RvbBo':function(_0x35c386,_0x2f1f6c){return _0x35c386+_0x2f1f6c;},'SeWhI':function(_0x9db213,_0x4fc75a){return _0x9db213+_0x4fc75a;},'icdHv':_0x46b0d7['NccWr'],'gNVXQ':function(_0xfbf7f8,_0x257b34){return _0xfbf7f8===_0x257b34;},'FAqCM':'AHzwc','wkRWb':_0x46b0d7[_0x1997('‫4b','13db')],'svUvn':_0x46b0d7['ytOqG'],'vovEQ':_0x46b0d7[_0x1997('‫4c','$oVM')],'aNKKh':_0x1997('‮4d','!y^w'),'ChIqj':function(_0x176821,_0x303f34){return _0x176821==_0x303f34;},'AKAFQ':_0x1997('‫4e','MDZJ'),'iNCgJ':_0x46b0d7[_0x1997('‮4f','$oVM')],'AXNDM':function(_0x57988b,_0x3fadb7){return _0x46b0d7[_0x1997('‮50','y89e')](_0x57988b,_0x3fadb7);},'iFGLc':_0x46b0d7[_0x1997('‮51','&a&L')],'ikKtg':_0x46b0d7[_0x1997('‫52','Js&h')],'ArFIr':function(_0xa15f70,_0xaaca9c){return _0xa15f70!==_0xaaca9c;},'WTgQM':_0x46b0d7['iLJMD'],'sENvA':_0x46b0d7['sfteI'],'WUsTJ':function(_0x553c9f,_0x169897){return _0x46b0d7[_0x1997('‫53','ei%W')](_0x553c9f,_0x169897);},'JBATz':_0x46b0d7['aMXTk']};if(_0x46b0d7[_0x1997('‫54','yr3j')](_0x46b0d7[_0x1997('‮55','ei%W')],_0x46b0d7['pIgGG'])){$['get'](_0x46b0d7['vTFjC'](getApiUrl),async(_0x4b911f,_0x273191,_0x58a840)=>{var _0x22ddc7={'eHzmK':function(_0x13a74e,_0x3ab02f){return _0x13a74e+_0x3ab02f;},'SCBAu':_0x1997('‫56','Te@X')};if(_0x1b1a07[_0x1997('‫57','&a&L')](_0x1b1a07[_0x1997('‫58','2k1w')],_0x1b1a07[_0x1997('‮59','s4yz')])){try{if(_0x4b911f){if(_0x1b1a07[_0x1997('‮5a','Q$#8')](_0x1b1a07[_0x1997('‫5b','CBWr')],_0x1997('‫5c','@4Mc'))){console[_0x1997('‫5d','9b$8')](_0x1997('‫5e','ei%W'));}else{if(!getQmExpireDate(process[_0x1997('‫5f','9b$8')][_0x1997('‫60','gKYG')],0x1)){console['log'](_0x22ddc7['eHzmK'](_0x22ddc7[_0x1997('‫61','&9UE')],jhmMsg));return;}}}else{if(_0x1b1a07[_0x1997('‮62','644B')](_0x1b1a07['svUvn'],_0x1997('‮63','db0c'))){_0x58a840=JSON[_0x1997('‮64','A]mN')](_0x58a840);for(var _0x192cf9 in _0x58a840){if(_0x1b1a07['gNVXQ'](_0x1b1a07[_0x1997('‫65','MDZJ')],_0x1b1a07[_0x1997('‫66','9b$8')])){retCode=_0x1b1a07[_0x1997('‫67','*F*Y')](_0x1b1a07[_0x1997('‮68','MU&$')](retCode,index),'');}else{if(_0x1b1a07[_0x1997('‮69','yr3j')](_0x58a840[_0x192cf9][_0x1997('‮6a','MDZJ')],0x21)){if(_0x1b1a07[_0x1997('‮6b','2hRJ')]===_0x1b1a07[_0x1997('‮6c','db0c')]){calResult+=codeArr[i][_0x1997('‫6d','U*8x')]();}else{if(_0x58a840[_0x192cf9][_0x1997('‫6e','ulno')]==0x1){console[_0x1997('‮19','IpDJ')]('商品'+_0x192cf9+_0x1997('‫6f','&9UE'));tips+=_0x1b1a07[_0x1997('‮70','MU&$')](_0x1b1a07[_0x1997('‮71','A]mN')](_0x1b1a07[_0x1997('‮72','bD9b')]+_0x192cf9,_0x1b1a07[_0x1997('‫73','@4Mc')]),'\x0a');}else{console[_0x1997('‮74','V*K^')]('商品'+_0x192cf9+_0x1997('‮75','A]mN'));}}}else if(_0x58a840[_0x192cf9][_0x1997('‮76','uLnn')]==0x24){if(_0x1b1a07[_0x1997('‮77','gKYG')]('xOItM',_0x1997('‮78','X&J8'))){console[_0x1997('‫79','nqT(')](_0x1b1a07[_0x1997('‮71','A]mN')]('商品',_0x192cf9)+_0x1b1a07[_0x1997('‮7a','rwFM')]);}else{$['done']();}}else if(_0x1b1a07[_0x1997('‫7b','!y^w')](_0x58a840[_0x192cf9][_0x1997('‮7c','gg7j')],0x22)){console['log']('商品'+_0x192cf9+_0x1b1a07[_0x1997('‫7d','644B')]);}else{console[_0x1997('‫7e','2k1w')](_0x1b1a07[_0x1997('‫7f','9b$8')](_0x1b1a07[_0x1997('‮80','*F*Y')]('商品',_0x192cf9)+_0x1b1a07['JBATz'],_0x58a840[_0x192cf9][_0x1997('‮81','*F*Y')]));}}}}else{goodId=goodId[_0x1997('‮82','uLnn')](/,/g,_0x1b1a07[_0x1997('‮83','V*K^')]);}}}catch(_0x3d1809){$[_0x1997('‮84','2k1w')](_0x3d1809,_0x273191);}finally{_0x4588fb(_0x58a840);}}else{goodId=goodId['replace'](/&/g,_0x1b1a07['icdHv']);}});}else{console['log'](_0x46b0d7[_0x1997('‫85',']$qY')](_0x46b0d7[_0x1997('‫86','s4yz')]('商品',sId),_0x46b0d7[_0x1997('‫87','&a&L')]));}});}function getApiUrl(){var _0x5c567b={'xsFyd':function(_0x77fdde,_0xd7a7a1){return _0x77fdde+_0xd7a7a1;},'prumf':function(_0x1045fa,_0x549fee){return _0x1045fa+_0x549fee;},'KxMBa':'https://cd.jd.com/stocks?type=getstocks&skuIds=','HPawR':_0x1997('‫88',']$qY'),'XEkFh':'cd.jd.com','vpDgJ':_0x1997('‮89','gKYG'),'IcWJU':_0x1997('‮8a','eHz3')};let _0x34c8fb=_0x5c567b['xsFyd'](_0x5c567b[_0x1997('‫8b','*F*Y')](_0x5c567b[_0x1997('‮8c','rwFM')](_0x5c567b['prumf'](_0x5c567b[_0x1997('‫8d','2k1w')],goodId)+_0x5c567b[_0x1997('‮8e','ywUm')],areaId),'&_='),new Date()['getTime']());return{'url':_0x34c8fb,'headers':{'User-Agent':$['user_agent'],'Host':_0x5c567b[_0x1997('‫8f','bD9b')],'Origin':_0x5c567b[_0x1997('‫90','o45#')],'Content-Type':_0x5c567b['IcWJU']}};}function _calMyqlChar(_0x44d85f){if(!_0x44d85f){return 0x0;}let _0x59761f=_0x44d85f[_0x1997('‫91','Q$#8')]('');let _0x3b0757=0x0;for(var _0x1a39ef in _0x59761f){_0x3b0757+=_0x59761f[_0x1a39ef][_0x1997('‮92','&9UE')]();}return _0x3b0757;}function _getMyqlcRealStr(_0x556d93){var _0x34106d={'xljLj':function(_0x1ceda9,_0x446cd1){return _0x1ceda9+_0x446cd1;},'pgsph':_0x1997('‫93','9b$8'),'hvTOu':function(_0xce0202,_0x556352){return _0xce0202>_0x556352;},'RsNXj':_0x1997('‫94','@4Mc'),'ydnCQ':function(_0x141fdc,_0x5b6f8c){return _0x141fdc!==_0x5b6f8c;},'VJyir':_0x1997('‫95','ei%W'),'BtxCS':'ESxpH','Yuyty':_0x1997('‮96','ulno'),'lpYeU':function(_0x2fef39,_0x4d4296){return _0x2fef39<_0x4d4296;},'nOjTy':function(_0xa1e0d0,_0x3de1e9){return _0xa1e0d0!==_0x3de1e9;},'QVmVH':'dWFlY','GWDHl':'BsxIm','NMXNX':'qEIrm','xTlnh':function(_0x4641d2,_0x3bfc86){return _0x4641d2-_0x3bfc86;}};if(!_0x556d93){if(_0x34106d[_0x1997('‫97','nqT(')](_0x34106d[_0x1997('‫98',')hPJ')],_0x34106d['BtxCS'])){return null;}else{date=new Date(time);}}const _0x58b0d4=_0x34106d['Yuyty'];let _0x270a44='';let _0x1e5fce=_0x556d93[_0x1997('‮99','MHX@')]('');for(var _0x144b45 in _0x1e5fce){let _0x6c07b4=_0x58b0d4['indexOf'](_0x1e5fce[_0x144b45]);if(_0x34106d[_0x1997('‮9a','&a&L')](_0x6c07b4,0x0)||_0x34106d[_0x1997('‫9b','yr3j')](_0x6c07b4,_0x58b0d4['length'])){if(_0x34106d[_0x1997('‮9c','1c9T')](_0x34106d[_0x1997('‮9d','*F*Y')],_0x34106d[_0x1997('‫9e','Js&h')])){return null;}else{console['log'](_0x34106d['xljLj'](_0x34106d[_0x1997('‫9f','bD9b')],process['env'][_0x1997('‮a0','ei%W')]));goodId=process['env'][_0x1997('‮a1','U*8x')];if(_0x34106d[_0x1997('‫a2','MHX@')](goodId[_0x1997('‫a3','ei%W')]('&'),-0x1)){goodId=goodId[_0x1997('‫a4','$oVM')](/&/g,_0x34106d['RsNXj']);}else if(_0x34106d[_0x1997('‫a5','$oVM')](goodId[_0x1997('‮a6','CBWr')](','),-0x1)){goodId=goodId['replace'](/,/g,_0x34106d[_0x1997('‮a7','644B')]);}}}if(_0x6c07b4<0xa){if(_0x34106d[_0x1997('‫a8','13db')]!==_0x1997('‮a9','&a&L')){_0x270a44=_0x34106d['xljLj'](_0x270a44+_0x6c07b4,'');}else{if(!_0x556d93){return 0x0;}let _0x496fc9=_0x556d93[_0x1997('‮aa','o45#')]('');let _0x2f6ae0=0x0;for(var _0x5a4434 in _0x496fc9){_0x2f6ae0+=_0x496fc9[_0x5a4434]['charCodeAt']();}return _0x2f6ae0;}}else{_0x6c07b4=_0x34106d[_0x1997('‫ab','1c9T')](_0x34106d['xljLj'](_0x6c07b4,0x61),0xa);_0x270a44=_0x270a44+String[_0x1997('‮ac','Te@X')](_0x6c07b4);}}return _0x270a44;}function getQmExpireDate(_0x16c725,_0x4ade69){var _0x3dfe5b={'BQqdz':function(_0x48ec4a,_0x48cfc7){return _0x48ec4a+_0x48cfc7;},'IRPAu':function(_0x336b08,_0x18eb88){return _0x336b08+_0x18eb88;},'pTJyb':_0x1997('‮ad',']unw'),'oIvrq':'sgBDu','ktVmK':function(_0x391661,_0x136926){return _0x391661(_0x136926);},'bKGcY':function(_0x3a2c1a,_0x48e005){return _0x3a2c1a!=_0x48e005;},'JhAqF':function(_0xecb021,_0x25bdc9){return _0xecb021%_0x25bdc9;},'RxqIv':function(_0x3739d5,_0x3319a0){return _0x3739d5!==_0x3319a0;},'fndNQ':_0x1997('‮ae','2hRJ'),'yaceF':'lIHgO','ZpLIg':function(_0x507d68,_0x259eca){return _0x507d68-_0x259eca;},'VnKEg':function(_0x8d1d9a,_0x4b34dd){return _0x8d1d9a-_0x4b34dd;},'ylnwZ':function(_0x2d660c,_0x266e73){return _0x2d660c+_0x266e73;},'MnqNy':function(_0x523d9d,_0x1cbd9b){return _0x523d9d+_0x1cbd9b;},'buaAo':_0x1997('‮af','bD9b'),'jaQxF':function(_0x1c28cb,_0x4a122d){return _0x1c28cb<_0x4a122d;},'VqzzY':_0x1997('‫b0','A]mN'),'MrKIu':_0x1997('‫b1','ei%W')};try{if(_0x3dfe5b['oIvrq']==='aNWjt'){console[_0x1997('‮19','IpDJ')](_0x3dfe5b[_0x1997('‫b2','ei%W')](_0x3dfe5b['IRPAu'](_0x3dfe5b[_0x1997('‮b3','ywUm')]('商品',sId),_0x1997('‫b4','db0c')),data[sId][_0x1997('‮b5','!y^w')]));}else{const _0x50243d=[0x158af,0xd446,0xcc58,0x1c2c,0x934,0x5ad8,0x8631,0xa22b,0x5e3c,0x7e43];let _0x505232=_0x3dfe5b[_0x1997('‮b6','x!zX')](_getMyqlcRealStr,_0x16c725);let _0x31e357=parseInt(_0x505232['substring'](0xb,0xc));let _0x17a09a=_0x505232[_0x1997('‫b7','x!zX')](0x4,0x8);if(_0x3dfe5b[_0x1997('‫b8',']unw')](_0x3dfe5b['JhAqF'](_0x3dfe5b['ktVmK'](_calMyqlChar,_0x505232['substring'](0x0,0xc)),0xa),_0x3dfe5b[_0x1997('‮b9','cIzm')](parseInt,_0x505232[_0x1997('‫ba','Te@X')](0xc,0xd)))){return![];}let _0x199973=parseInt(_0x505232[_0x1997('‫bb','cIzm')](0x0,0x1));if(_0x4ade69&&_0x4ade69!=_0x199973){if(_0x3dfe5b[_0x1997('‫bc','@4Mc')](_0x3dfe5b[_0x1997('‮bd','cIzm')],_0x3dfe5b[_0x1997('‫be','gKYG')])){return![];}else{jdNotify=![];console[_0x1997('‮bf','1c9T')](_0x3dfe5b[_0x1997('‮c0','y89e')]);}}let _0x5e3520=_0x3dfe5b[_0x1997('‮c1','1c9T')](_0x3dfe5b[_0x1997('‫c2','M7Jg')](_0x3dfe5b['VnKEg'](parseInt(_0x505232[_0x1997('‫ba','Te@X')](0x1,0x4)+_0x505232[_0x1997('‫c3','MHX@')](0x8,0xb)),_0x50243d[_0x199973-0x1]),_0x31e357),'');let _0x59fb1e=_0x3dfe5b['IRPAu'](_0x3dfe5b[_0x1997('‮c4','s4yz')](_0x3dfe5b[_0x1997('‮c5','9b$8')](_0x3dfe5b[_0x1997('‮c1','1c9T')](_0x3dfe5b[_0x1997('‮c6','y89e')](_0x3dfe5b[_0x1997('‮c7','U*8x')]('20',_0x5e3520[_0x1997('‫c8','oOpu')](0x0,0x2)),'/'),_0x5e3520[_0x1997('‫c9','3Gv6')](0x2,0x4)),'/'),_0x5e3520[_0x1997('‫ca','bD9b')](0x4,0x6)),'\x20')+_0x3dfe5b[_0x1997('‫cb','gKYG')];if(_0x3dfe5b[_0x1997('‮cc','mTd1')](new Date(_0x59fb1e)[_0x1997('‮cd','V*K^')](),new Date()[_0x1997('‮ce','m)4d')]())){if(_0x3dfe5b['VqzzY']!==_0x1997('‫cf','uLnn')){return![];}else{return 0x0;}}else{return!![];}}}catch(_0xfea0a0){if(_0x3dfe5b['MrKIu']===_0x3dfe5b[_0x1997('‮d0','rwFM')]){return![];}else{$['log']('','❌\x20'+$['name']+',\x20失败!\x20原因:\x20'+_0xfea0a0+'!','');}}}function timeFormat(_0x29e7bf){var _0x1df73d={'dpGTe':function(_0x3f473e,_0x287769){return _0x3f473e+_0x287769;},'mtVWr':function(_0x15d8c4,_0x500ba4){return _0x15d8c4+_0x500ba4;},'gSmXx':_0x1997('‫d1','644B'),'rYsIM':_0x1997('‮d2','ei%W'),'hsSNQ':_0x1997('‫d3','bD9b'),'NFFwb':function(_0x29c59d,_0x13993d){return _0x29c59d+_0x13993d;},'dZMGa':function(_0x5cdfa0,_0x2f9442){return _0x5cdfa0+_0x2f9442;},'LHjGG':function(_0x4c22a2,_0x8a3713){return _0x4c22a2+_0x8a3713;},'JJQHy':function(_0x1db6e9,_0x10c20b){return _0x1db6e9>=_0x10c20b;},'zaYyh':function(_0x4beb2b,_0x25ebd6){return _0x4beb2b+_0x25ebd6;},'IthsG':function(_0x5a626e,_0x15ec76){return _0x5a626e+_0x15ec76;},'mVPjM':function(_0x3e2317,_0x118000){return _0x3e2317+_0x118000;}};let _0xe14449;if(_0x29e7bf){_0xe14449=new Date(_0x29e7bf);}else{if('pIQDZ'!==_0x1df73d[_0x1997('‫d4','A]mN')]){_0xe14449=new Date();}else{let _0x586c09=_0x1df73d[_0x1997('‫d5','eHz3')](_0x1df73d[_0x1997('‮d6','gKYG')]('https://cd.jd.com/stocks?type=getstocks&skuIds='+goodId,_0x1997('‫d7','eHz3'))+areaId+_0x1997('‫d8','2hRJ'),new Date()[_0x1997('‫d9','U*8x')]());return{'url':_0x586c09,'headers':{'User-Agent':$[_0x1997('‮da','$oVM')],'Host':_0x1df73d['gSmXx'],'Origin':_0x1df73d['rYsIM'],'Content-Type':_0x1997('‫db','2k1w')}};}}return _0x1df73d['NFFwb'](_0x1df73d[_0x1997('‮dc','M7Jg')](_0x1df73d[_0x1997('‫dd','gKYG')](_0x1df73d[_0x1997('‫de','ZTXC')](_0x1df73d['LHjGG'](_0x1df73d['LHjGG'](_0x1df73d[_0x1997('‫df','x!zX')](_0xe14449['getFullYear']()+'-',_0x1df73d['JJQHy'](_0xe14449[_0x1997('‮e0','mTd1')]()+0x1,0xa)?_0x1df73d[_0x1997('‫e1','gg7j')](_0xe14449[_0x1997('‮e2','U*8x')](),0x1):'0'+(_0xe14449[_0x1997('‫e3','1c9T')]()+0x1))+'-'+(_0x1df73d['JJQHy'](_0xe14449[_0x1997('‫e4','x!zX')](),0xa)?_0xe14449[_0x1997('‮e5','A]mN')]():_0x1df73d[_0x1997('‫e6','ywUm')]('0',_0xe14449[_0x1997('‫e7','gKYG')]())),'\x20'),_0xe14449[_0x1997('‫e8','Js&h')]()>=0xa?_0xe14449[_0x1997('‮e9','eHz3')]():'0'+_0xe14449['getHours']())+':',_0xe14449[_0x1997('‫ea','x!zX')]()>=0xa?_0xe14449['getMinutes']():_0x1df73d[_0x1997('‫eb','ywUm')]('0',_0xe14449['getMinutes']())),':'),_0xe14449[_0x1997('‮ec','Te@X')]()>=0xa?_0xe14449[_0x1997('‮ed','gg7j')]():_0x1df73d['mVPjM']('0',_0xe14449[_0x1997('‫ee','eHz3')]()))+':',_0xe14449[_0x1997('‫ef','M7Jg')]());};_0xod5='jsjiami.com.v6';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}